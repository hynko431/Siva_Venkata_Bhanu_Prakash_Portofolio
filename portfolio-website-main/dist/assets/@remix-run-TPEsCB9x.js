function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x.apply(this,arguments)}var v;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(v||(v={}));const B="popstate";function ne(e){e===void 0&&(e={});function t(n,a){let{pathname:l,search:s,hash:o}=n.location;return L("",{pathname:l,search:s,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:W(a)}return V(t,r,null,e)}function E(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function b(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function H(){return Math.random().toString(36).substr(2,8)}function I(e,t){return{usr:e.state,key:e.key,idx:t}}function L(e,t,r,n){return r===void 0&&(r=null),x({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?U(t):t,{state:r,key:t&&t.key||n||H()})}function W(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function U(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function V(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:l=!1}=n,s=a.history,o=v.Pop,i=null,c=d();c==null&&(c=0,s.replaceState(x({},s.state,{idx:c}),""));function d(){return(s.state||{idx:null}).idx}function h(){o=v.Pop;let u=d(),f=u==null?null:u-c;c=u,i&&i({action:o,location:p.location,delta:f})}function g(u,f){o=v.Push;let m=L(p.location,u,f);c=d()+1;let R=I(m,c),y=p.createHref(m);try{s.pushState(R,"",y)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;a.location.assign(y)}l&&i&&i({action:o,location:p.location,delta:1})}function S(u,f){o=v.Replace;let m=L(p.location,u,f);c=d();let R=I(m,c),y=p.createHref(m);s.replaceState(R,"",y),l&&i&&i({action:o,location:p.location,delta:0})}function w(u){let f=a.location.origin!=="null"?a.location.origin:a.location.href,m=typeof u=="string"?u:W(u);return m=m.replace(/ $/,"%20"),E(f,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,f)}let p={get action(){return o},get location(){return e(a,s)},listen(u){if(i)throw new Error("A history only accepts one active listener");return a.addEventListener(B,h),i=u,()=>{a.removeEventListener(B,h),i=null}},createHref(u){return t(a,u)},createURL:w,encodeLocation(u){let f=w(u);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:g,replace:S,go(u){return s.go(u)}};return p}var O;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(O||(O={}));function re(e,t,r){return r===void 0&&(r="/"),k(e,t,r)}function k(e,t,r,n){let a=typeof t=="string"?U(t):t,l=Z(a.pathname||"/",r);if(l==null)return null;let s=A(e);N(s);let o=null;for(let i=0;o==null&&i<s.length;++i){let c=Y(l);o=J(s[i],c)}return o}function A(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(l,s,o)=>{let i={relativePath:o===void 0?l.path||"":o,caseSensitive:l.caseSensitive===!0,childrenIndex:s,route:l};i.relativePath.startsWith("/")&&(E(i.relativePath.startsWith(n),'Absolute route path "'+i.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),i.relativePath=i.relativePath.slice(n.length));let c=P([n,i.relativePath]),d=r.concat(i);l.children&&l.children.length>0&&(E(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),A(l.children,t,d,c)),!(l.path==null&&!l.index)&&t.push({path:c,score:G(c,l.index),routesMeta:d})};return e.forEach((l,s)=>{var o;if(l.path===""||!((o=l.path)!=null&&o.includes("?")))a(l,s);else for(let i of C(l.path))a(l,s,i)}),t}function C(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),l=r.replace(/\?$/,"");if(n.length===0)return a?[l,""]:[l];let s=C(n.join("/")),o=[];return o.push(...s.map(i=>i===""?l:[l,i].join("/"))),a&&o.push(...s),o.map(i=>e.startsWith("/")&&i===""?"/":i)}function N(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:K(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const T=/^:[\w-]+$/,_=3,q=2,D=1,F=10,z=-2,j=e=>e==="*";function G(e,t){let r=e.split("/"),n=r.length;return r.some(j)&&(n+=z),t&&(n+=q),r.filter(a=>!j(a)).reduce((a,l)=>a+(T.test(l)?_:l===""?D:F),n)}function K(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function J(e,t,r){let{routesMeta:n}=e,a={},l="/",s=[];for(let o=0;o<n.length;++o){let i=n[o],c=o===n.length-1,d=l==="/"?t:t.slice(l.length)||"/",h=Q({path:i.relativePath,caseSensitive:i.caseSensitive,end:c},d),g=i.route;if(!h)return null;Object.assign(a,h.params),s.push({params:a,pathname:P([l,h.pathname]),pathnameBase:ee(P([l,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(l=P([l,h.pathnameBase]))}return s}function Q(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=X(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let l=a[0],s=l.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((c,d,h)=>{let{paramName:g,isOptional:S}=d;if(g==="*"){let p=o[h]||"";s=l.slice(0,l.length-p.length).replace(/(.)\/+$/,"$1")}const w=o[h];return S&&!w?c[g]=void 0:c[g]=(w||"").replace(/%2F/g,"/"),c},{}),pathname:l,pathnameBase:s,pattern:e}}function X(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),b(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,i)=>(n.push({paramName:o,isOptional:i!=null}),i?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function Y(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return b(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Z(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const P=e=>e.join("/").replace(/\/\/+/g,"/"),ee=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/");function ae(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const M=["post","put","patch","delete"];new Set(M);const te=["get",...M];new Set(te);export{v as A,ae as a,ne as c,E as i,P as j,re as m,U as p,Z as s};
